# OceanBase双十一
### zerz
![](fig/Snipaste_2021-03-19_19-32-10.png)
这个ppt一样的东西是2016年的，所以我去看的这个网页
[迎双 11 十周年，OceanBase 2.0 挑战新巅峰](https://www.infoq.cn/article/wwpgfqhf7r8o4qybvogs)
2017年的双十一，25.6万笔/秒
数据库处理峰值：4200万次/秒
OceanBase：金融级、分布式数据库，目标是称为新一代商用关系型数据库，优势在于底层的分布式技术
- OceanBase 1.0 已经实现了用户对机器故障的无感知，也就是多台机器部署数据库，无论哪台机器宕机都可以 30 秒内无损切换
- 数据库层面的自动分片和自动负载均衡
  - 把数据集切分成若干子集再分布到不同的机器上
- OceanBase 1.0 已经支持了分布式事务，2.0 版本则进一步实现了全局快照和全局索引
  - 全局快照，即当一条 SQL 语句涉及到多台机器时，通过全局快照保证各台机器的强一致读取。在全局快照读的基础上，OceanBase2.0 实现了全局索引，就真正做到了用户对多机环境的无感知
  - OceanBase 2.0 在全局时钟的基础上又引入了租户级时钟，从而保证单个租户的数据一致性，而无须频繁引用全局时钟，这样就避免了全局时钟成为整个系统的瓶颈
- 对支付业务的改进
  - 日志服务：日志服务（Log Service，SLS）是针对日志类数据一站式服务
  - 日志类数据：日志数据，就是记录IT系统产生的过程性事件记录数据。每一条日志数据都包含4W（Who？When？Where？What？）内容
  - > 暂时没找到事务服务的详细定义
  - 支付业务是典型的在线事务处理类，以短小事务为主，事务的提交执行的频率特别高。事务的提交也通常是数据库内部最耗时的一部分。OceanBase 2.0 打通日志服务与事务服务，将原先分布式事务两阶段提交的多条日志优化到每个分区只有一条日志，依然保证很好的支持事务的原子性和一致性的功能。
  - >支付业务应该也是一个很重要的点
- 对内存分配的改进
  - 预分配很多内存，浪费
  - 自适应内存分配器算法，只对写入量大的分区进行内存的预分配
  - >感觉可以从自适应内存分配器算法入手写一些